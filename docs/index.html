<!doctype html>
<html class="no-js b-Op" lang="en">
  <head>
    <meta charset="utf-8">
    <title>Www.idio.cc</title>
    <meta content="The 150-160 characters search engine meta:description" name="description">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link sizes="57x57" rel="apple-touch-icon" href="/img/fav-57.png">
  <link sizes="76x76" rel="apple-touch-icon" href="/img/fav-76.png">
  <link sizes="32x32" rel="icon" href="/img/fav-32.png">
  <link
    href="https://fonts.googleapis.com/css?display=swap&amp;family=Ruda%3A400%2C700%7CShare%20Tech" rel="preload" as="fetch" crossOrigin>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin>
    <link href="https://fonts.googleapis.com/css?family=Source%20Code%20Pro" rel="preload" as="style">
    <script>
      (function(b){var a=document.createElement("link");a.href=b;a.rel="stylesheet";a.crossOrigin="crossorigin";document.head.appendChild(a)})('https://fonts.googleapis.com/css?family=Source%20Code%20Pro')
    </script>
    <style id="cpt">
      
        h1 { font-family: 'Share Tech' }
    
      @font-face {
        font-family: 'Share Tech';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('Share Tech Regular'), local('ShareTech-Regular'), url('data:application/font-woff2;base64,d09GMgABAAAAAARQAA4AAAAACDwAAAP8AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhQbgSQcGgZgAHwRCAqFGIQbCxoAATYCJAMwBCAFhBgHIBuyBsgEAsI575NgCXhh8xbpmJgWqfjMxPI/l9M7CjAeUyzFu39jN/DumoMWzUlhcSK9bGxdyzIPkFPBTVLM5h5Uj3v5CCAUSxYEQ1Du56lkJy+ibaOu7U0MuEbPEUqbZp0hchVGQWJgLWT8KjeI3BSlsldpozaCIOS/DOwLIgQVDQlZ/4Rm2soE6t8JQkNkCcWkn2HAgH4a/4Ry5dX07/nTxpGRXuxQxHExkQCQRks1UUTrPkvUp7DI+9IZ8NkoMuppfmsNBwchIVbupoeD3I3PphImEV+lvSKYyiZJlGpAfqMzoNBSiSMyz0diIg0vNWhMM1rRgc5013WSfmbX9CT9kb5L36iv05foi/UF+mx9pj4tvWaLXIHQdSKEbDEuI+Cau2A4/pWe+UkQS42Eq3eGJoWFh0WGGVRFiYwMC9KEFqAKDVXReHJVteaMOSDEoPWqOvq6teuGpqGO3gsD92namGvK4jC1dk21vlavjlargfZxJEBjzePI7bVIJLJ/qMlOeorQFPX6BiFHQj0EQlDvVNQ6rmv0WhQ0EBp1ZU2KuXf0V/z1dzSNHAjX0diTtSPWIqlham2tVh0tX5oltyXtyfb/MsBX11djqG28+Y6xZfanRkO6v7o3h7+ur8Yw2wTzHaPN2NNkSHG4vZX5NbJygdQCg+P32LMNrVXPU7te9qFprLJ6rDU27vXfvZIvsqY73b/1afBnQ3Izs9t41+g2J+GLCywQW9Od7t/q81hrNDzp3+tKSv9sSG5tdhvvGt3mXMx0p/u3Vk9Lq54lJdVhG/zdanSbx1gH2eOtmaMy50g6aLKQ3qh2g9q1Gn31f2V5WumwGh6rLzLqGH3uNseD8D7A+cWVRS2Q5vLG/4lt4sfcZ/iXOm3Wtlxbs7kxHBKZZlU4U/18g4iy34Jl+eWj0JW3o7Ji6dXU0yP1NXqsUkmuMUwdEkF2+JmV2foafY1SqftlhorvVBKK/q1y5BM7KCHZqSQ+4hLfsIjLWPiGVbzDIuy4xHkSpxV/U4Ly1HChBNN8+LiVEFM4OqDgLAsMJgmTRDg3TTIleW5SSBLZTQFkFpVNgSSIuveHU1T0pwod6EgvOtOKFrSkKyYKU5BCFDaSPlrSzEC9aiM6+5k+mtGElkaui850oPU1MLmV6EZXWg5brossz0lHOtCFrlSkCQvfJlvRhfyyvAPtyEVeTPSgFZM04aGZ8M2G/VKa0RQTFjrQPua0g0a0S70nOS+TTZnInzOIhWshQtunvy1EfgpRkIKUwY+VGjgow9DGoHxoocwN3gvV8yp0ma5G22NKp824oa7ndaUjpSlAAboA2oDraED9QHxqW/LXZWULCuDEgm1Cnqhvo/D8BwAA') format('woff2');
      }
      
    </style>
    <script>
      (function(){var b=/url\('([\s\S]+?)'\)/.exec(document.head.querySelector("#cpt").textContent);if(b){var a=document.createElement("link");a.rel="preload";a.as="font";a.href=b[1];document.head.appendChild(a)}})()
    </script>
    <script>(function(h,r){var a=Object.keys(h),c=!0;"CSS"in window&&"supports"in CSS?(a=a.reduce(function(k,b){var l=h[b];b=b.split("|");for(var m=!1,d={},f=0;f<b.length;d={a:d.a},f++)if(d.a=b[f],l.map(function(n){return function(e){e=e.split("|");for(var p=!1,g=0;g<e.length;g++){var q=e[g];if(CSS.supports(n.a,q)){p=!0;break}else k.push(n.a+": "+q)}return p}}(d)).filter(Boolean).length==l.length){m=!0;break}m||(c=!1);return k},[]),a.length?c&&console.log("\ud83d\udcbf Browser does not support CSS properties: %s",
a.join("\n "),"but supports alternatives."):console.log("\ud83d\udcbd Browser supports all modern CSS properties.")):(c=!1,console.log("\ud83d\udce0 Browser does not support CSS checks."));c||(a=document.createElement("link"),a.rel="stylesheet",a.href=r,document.head.appendChild(a))})({"border-radius":["2px"],"box-shadow":["none"],"flex|-ms-flex":["0 0 25%"],"display":["flex|-ms-flexbox"],"hyphens|-webkit-hyphens|-ms-hyphens":["auto"],"flex-shrink|-ms-flex-negative":["0"],"position":["sticky|-webkit-sticky"],"flex-wrap|-ms-flex-wrap":["wrap"],"box-sizing":["border-box"],"flex-direction|-ms-flex-direction":["column"]}, '/css/combined-prefixes.css')</script>
    <script>
      (function(q,k){function x(a){for(var f=/url\((.+?)\).*?;\s+unicode-range: (.+?);/g,b={},d=[],h;h=f.exec(a);){var r=h[2];d.push({url:h[1],a:r});b[r]=1}b=Object.keys(b).reduce(function(c,e){var g=e.split(/,\s/).map(function(l){return l.replace("U+","\\u").replace("-","-\\u")}).join("").toLowerCase();c[e]=new RegExp("["+g+"]");return c},{});var t=document.body?document.body.textContent:"",y=t?Object.keys(b).reduce(function(c,e){b[e].test(t)&&(c[e]=!0);return c},{}):Object.keys(b).reduce(function(c,
      e){e in k&&(c[e]=!0);return c},{});m=d.filter(function(c){return c.a in y}).map(function(c){return c.url});if(!m.length)return u();var v=document.createDocumentFragment();m.forEach(function(c,e){var g=document.createElement("link");g.href=c;g.rel="preload";g.as="font";var l=e+1;;g.onload=function(){return u(l)};g.setAttribute("crossorigin",!0);v.appendChild(g)});document.head.appendChild(v)}k=void 0===k?{}:k;var n=document.createElement("link");if(function(a,
      f){if(!a||!a.supports)return!1;try{return a.supports(f)}catch(b){return!1}}(n.relList,"preload")){var z=function(a,f,b){b=void 0===b?"":b;;var d=new XMLHttpRequest;d.onreadystatechange=function(){4==d.readyState&&(200==d.status?(f(d.responseText)):console.error("Error loading webfont: server responded with code %s at %s",d.status,a))};d.open("GET",a);try{d.send(null)}catch(h){console.error(h)}};
      ;var p;(function(a,f){z(a.href,function(b){p=b;x(p)},"-"+(void 0===f?"link":f))})({href:q},"js");var m=[],w=0,u=function(a){w++;w>=m.length&&(a=document.createElement("style"),a.innerHTML=p,document.head.appendChild(a))}}else n.rel="stylesheet",n.href=q,document.head.appendChild(n)})('https://fonts.googleapis.com/css?display=swap&family=Ruda%3A400%2C700%7CShare%20Tech', {"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD":true})
    </script>
    <link rel="stylesheet" href="/css/combined.css">
    <link rel="preload" as="style" href="/highlight.js/styles/default.css">
    <style>
      .no-js [data-io], .no-js [data-loading], .no-js .ImageHolder { display: none!important }
    </style>
    <noscript>
      <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?display=swap&amp;family=Share%20Tech&amp;text=Idio%20Web%20Server">
      <link rel="stylesheet" href="/css/combined-prefixes.css">
      <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?display=swap&amp;family=Ruda%3A400%2C700%7CShare%20Tech">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source%20Code%20Pro">
    </noscript>
    <script defer src="/js/polyfill/intersection-observer.js"></script>
    <script defer src="/js/images.js"></script>
    <script crossorigin data-src="/preact/dist/preact.min.js"></script>
    <script crossorigin data-src="/comps/index.js"></script>
    <script>
      document.documentElement.classList.remove("no-js")
    </script>
  </head>
  <body class="b-Mk b-Ol b-Op">
    
    
    <main class="b-Xl" role="main">
      <div class="b-z">
        <div class="b-B">
          <div class="left-column b-hb">
            <div class="b-kC">
                <a href="/">
                  <img class="ImageHolder b-t b-vk" sizes="(max-width: 575.8px) 100vw,(max-width: 767.8px) 510px,(max-width: 991.8px) 150px,(max-width: 1199.8px) 210px,255px" alt="Idio Web Server logo" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2816' height='1880'/%3E">
                  <noscript>
                    <picture>
                      <source
                        srcset="img/building-1140.webp 1140w,img/building-768.webp 768w,img/building-576.webp 576w,img/building-319.webp 319w"
                        sizes="(max-width: 575.8px) 100vw,(max-width: 767.8px) 510px,(max-width: 991.8px) 150px,(max-width: 1199.8px) 210px,255px" type="image/webp">
                      <img class="b-t b-vk" onLoad="webploaded(this)" alt="Idio Web Server logo" src="/img/building-1140.JPG" srcset="img/building-1140.JPG 1140w,img/building-768.JPG 768w,img/building-576.JPG 576w,img/building-319.JPG 319w" sizes="(max-width: 575.8px) 100vw,(max-width: 767.8px) 510px,(max-width: 991.8px) 150px,(max-width: 1199.8px) 210px,255px">
                    </picture>
                  </noscript></a>
              </div>
              <div class="b-kC">
                <a title="@Goa/Koa Web Server Bundled With Essential Middleware, SSR And Router."
                  class="GitHubBadge" id="ce314" href="https://github.com/idiocc/idio">
                  <span class="a">GitHub</span><span class="b" data-stargazers>⭐️ 2</span></a>
                <a
                  title="2-Dependency _Koa_ Web Server Compiled With _Closure Compiler_ And Bundled With Essential Middleware: Static, Compress, Session, Cors, File Upload, Router And JSX Front End." class="NPMBadge" href="https://www.npmjs.com/package/@idio/idio">
                  <span class="a"><em>Idio</em></span><span class="b">1.6.2</span></a>
              </div>
              <h3 id="pages">Pages</h3>
              <ul><li class="Active"><a data-file="index" href="/">Www.idio.cc</a></li></ul>
              <h3 id="articles">Articles</h3>
              <ul>
                <li class><a data-file="./hot_reload" href="/articles/pure-hot-reload.html">Pure Hot Reload</a></li>
              </ul>
              <div class="SideBarMenu sidebarshowing b-jr b-zp">
                <div class="a">
                  
                                  <h3 id="on-this-page">On This Page</h3>
                                  <ul class="OnThisPage">
                                    <li data-heading="-idio-web-server"><a href="#-idio-web-server"><em>Idio</em> Web Server</a></li>
                                    <li data-heading="middleware"><a href="#middleware">Middleware</a></li>
                                    <li data-heading="router"><a href="#router">Router</a></li>
                                    <li data-heading="front-end"><a href="#front-end">Front End</a></li>
                                    <li data-heading="server-side-rendering"><a href="#server-side-rendering">Server-Side Rendering</a></li>
                                  </ul>
                                  <h3 id="share-now">Share Now!</h3>
                                  <span class="SocialSharing b-xq b-Hk" id="cfee3"><span class="b-Hk" style="height:32px" data-loading>Loading sharing buttons...</span><noscript>Please enable JavaScript to Share</noscript></span>
                                
                </div>
                <a id="HideMenu" style="color:grey!important;" href="#">hide menu</a>
                <a id="ShowMenu" style="color:grey!important;" href="#">show menu</a>
              </div>
          </div>
          
          <div class="right-column b-xq b-nb" id="Content">
            
            
            <div data-section id="-idio-web-server">
            <h1><em>Idio</em> Web Server</h1>
            
            <p><em>Idio</em> is a professional web server based on <em>Koa</em> compiled with <em>Closure Compiler</em> down to 2 dependencies. It is created by Art Deco™, a <a href="https://www.artd.eco">Node.JS development company in London</a> to enable rapid web development process with maximum efficiency. It has all middleware necessary to make modern full-stack services, including back-end routes and front-end components.</p>
            
            <p>Check out <a href="https://github.com/idiocc/idio">GitHub</a> README and <a href="https://github.com/idiocc/idio/wiki">Wiki</a> for more information.</p>
            
            <p>A bare <em>Koa</em> server consists of 43 dependencies, and when installing all middleware required for an essential web server, this number can go up to 150 and higher. We've completely rewritten <em>Koa</em>, its components and middleware into ES6 to produce <em>Idio</em> &mdash; a state of art webserver, type-checked and optimised with <em>Closure Compiler</em>. We left only 2 dependencies: <span class="tm">mime-db</span> and <span class="tm">text-decoding</span> that contain databases of mime types and encoding tables. This means that the installation time is minimal, and there's absolutely no rubbish in your <span class="tm">node_modules</span> directory.</p>
            
            <span id="ceb55">
              Please bear one moment while we add more content
            </span>
            
            <p class="SectionBreak">
              <a title="Back To Top" href="#top">
                <img alt="section break"
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='15'/%3E" data-io>
                <noscript><img alt="section break" src="/section-breaks/0.svg"></noscript></a>
            </p>
            </div>
            
            <div data-section id="middleware">
            <h2>Middleware</h2>
            
            <p>There are a number of middleware functions that were included in the bundle.</p>
            
            <ul>
              <li><strong>Static</strong>: to serve static files from the server.</li>
              <li><strong>Session</strong>: to maintain cookes on users' machines that record session information.</li>
              <li><strong>CORS</strong>: to add the correct Origin header for cross origin requests.</li>
              <li><strong>Compression</strong>: to make sure that responses are compressed with GZIP algorithm.</li>
              <li><strong>File Upload</strong>: to handle <em>multipart/form</em> data for file uploads and forms submissions.</li>
              <li><strong>Front End</strong>: to allow to develop browser applications without any additional build tools (see below).</li>
            </ul>
            
            <p class="SectionBreak">
              <a title="Back To Top" href="#top">
                <img alt="section break"
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='13'/%3E" data-io>
                <noscript><img alt="section break" src="/section-breaks/1.svg"></noscript></a>
            </p>
            </div>
            
            <div data-section id="router">
            <h2>Router</h2>
            
            <p>The router is one of the most important parts of the server, that allows you to specify which pages are served at which paths, as well as configuring middleware for routes as well as subroutes, therefore <em>Idio</em> simply returns its instance when you start a server.</p>
            
            <pre id="ccdbf3"><code class="javascript hljs">import idio, { Router } from '@idio/idio'

(async () =&gt; {
  const {
    url, router, app, middleware: { pre, post, jsonBody },
  } = await idio({
    // 1. Configure middlewares without installing them.
    jsonBody: {},
    jsonErros: {},
  })

  // 2. Setup API router.
  const api = new Router()
  api.post('/example',
    jsonErrors, // send errors as json
    jsonBody,   // parse incoming body
    (ctx) =&gt; {
      ctx.body = {
        ok: true,
        request: ctx.request.body,
      }
    },
  )
  // 3. Configure main router.
  router.use('/api', api.routes())
  router.get('/', (ctx) =&gt; {
    ctx.body = 'hello world'
  })
  app.use(router.routes())
  return url
})()</code></pre>
            
            <p class="SectionBreak">
              <a title="Back To Top" href="#top">
                <img alt="section break"
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='13'/%3E" data-io>
                <noscript><img alt="section break" src="/section-breaks/2.svg"></noscript></a>
            </p>
            </div>
            
            <div data-section id="front-end">
            <h2>Front End</h2>
            
            <p>With <em>Idio</em>, developing front-end is very easy, because of the <strong>front-end</strong> middleware that can serve <span class="tm">node_modules</span>, update JSX on-the-fly and provide hot reload for ES6 modules. You can simply create you client applications using the latest browser, and then compile them for production with <em>Closure</em>, that will change the code into ES5 understandable by older browsers. Check out this article: <a href="https://art-deco.github.io/nodetools/web-development-with-nodetools.html">
              Web Development With NodeTools</a>.</p>
            
            <p>Front end makes simply makes sure that JS files you've written for the browser can be accessed via the server. Because modern browsers understand latest language features as well as import statements, there's no need to create bulky set ups and complex build processes that you can't even understand. All that is happening, is that JS you wrote, is served to the browser with a few adjustments like renaming package into into their resolved paths. As simple as that.</p>
            
            <pre id="ccdbf"><code class="javascript hljs">// src:
import fetch from 'unfetch'
// becomes:
import fetch from '/node_modules/unfetch/src/unfetch.mjs'

fetch('/hello.txt')</code></pre>
            
            <p>Front End supports JSX syntax also so that <em>Preact</em> applications can be developed easily. There's also hot reload that will re-render the interface when the source code of components (both classes and stateless) changes, preserving their state. Consult <a href="/articles/pure-hot-reload.html">Pure Hot Reload</a> to understand how our simple HR works.</p>
            
            <pre id="ccdbf1"><code class="javascript hljs">import { render, Component } from 'preact'

class App extends Component {
  render() {
    return (&lt;div&gt;Hello World!&lt;/div&gt;)
  }
}

const app = &lt;App /&gt;
const a = render(app, window.container)

/* IDIO HOT RELOAD */
window['idioAddHotReload'] &amp;&amp; window['idioAddHotReload'](() =&gt; {
  render(app, window.container, a)
})</code></pre>
            
            <p>Such applications can then be compiled with <em>Closure</em> and served as static bundles either from CDN, or the server itself.</p>
            
            <p>
              <a href="https://github.com/idiocc/idio/wiki/Front-End">READ WIKI</a>
            </p>
            
            <p class="SectionBreak">
              <a title="Back To Top" href="#top">
                <img alt="section break"
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='9'/%3E" data-io>
                <noscript><img alt="section break" src="/section-breaks/3.svg"></noscript></a>
            </p>
            </div>
            
            <div data-section id="server-side-rendering">
            <h2>Server-Side Rendering</h2>
            
            <p>We believe that JSX is an essential part of JavaScript for web development. It's the most natural approach to programming for the web that requires templating. JSX is so good because it's JavaScript that can be used for marking up HTML code, and not some static HTML with parts that indicate dynamic content (e.g., like Handlebars). There's no better way to create dynamic web pages in Node.JS than with JSX, and <em>Idio</em> acknowledges that by providing a method to render JSX components.</p>
            
            <pre id="ccdbf2"><code class="javascript hljs">import { render } from '@idio/idio'

/**
 * @type {import('@idio/idio').Middleware}
 */
export default function route(ctx) {
  ctx.body = render(&lt;html&gt;
    &lt;body&gt;
      &lt;h1&gt;Hello World!&lt;/h1&gt;
    &lt;/body&gt;
  &lt;/html&gt;)
}</code></pre>
            
            <p>Behind the scenes, SSR is using <em>Preact</em> 8 for rendering, so you need to install <span class="tm2">preact@8.5.3</span>. The latest version of <em>Preact</em> is 10, however the API for static rendering is not compatible yet.</p>
            
            <p class="SectionBreak">
              <a title="Back To Top" href="#top">
                <img alt="section break"
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='9'/%3E" data-io>
                <noscript><img alt="section break" src="/section-breaks/4.svg"></noscript></a>
            </p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="b-ns">
      &copy; <a href="https://www.idio.cc">Idio</a>, 2020 | Website repo: <a title="Idio Web Server Website." class="GitHubBadge" id="ce149"
   href="https://github.com/idiocc/www.idio.cc">
   <span class="a">GitHub</span><span class="b" data-stargazers>⭐️ 1</span></a>
    </footer>
    <script>(function(){function b(){if(0<c.length){var a=c.shift();a.src=a.getAttribute("data-src");a.removeAttribute("data-src");a.onload=b;a.onerror=function(){console.warn("Could not load script %s",a.src)}}}var c=Array.prototype.slice.call(document.querySelectorAll("script[data-src]"));b()})()</script>
  </body>
</html>